function setPosition(e,t){element.style.transform=`translate(${e-halfElementWidth+19}px, ${t-halfElementWidth+19}px)`}function stars(){function e(e){return 1e3*Math.random()<10*e}function t(e,t){return Math.random()*(t-e)+e}function i(){l=window.innerWidth,r=window.innerHeight,a.setAttribute("width",l),a.setAttribute("height",r)}function n(){o.clearRect(0,0,l,r);for(let e of d)e.move(),e.fadeIn(),e.fadeOut(),e.draw();requestAnimationFrame(n)}function s(){i(),d=Array.from({length:u},()=>new m),n(),setTimeout(()=>c=!1,50)}const a=document.getElementById("starfield"),o=a.getContext("2d");let l=window.innerWidth,r=window.innerHeight,d=[],c=!0;const u=Math.floor(.3*l),h={giant:"180,184,240",star:"226,225,142",comet:"225,225,225"};class m{constructor(){this.reset()}reset(){this.isGiant=e(3),this.isComet=!this.isGiant&&!c&&e(20),this.x=t(0,l),this.y=t(0,r),this.size=t(1.1,2.6),this.dx=t(.05,.3)+(this.isComet?t(2.5,6):.05),this.dy=-t(.05,.3)-(this.isComet?t(2.5,6):.05),this.opacity=0,this.opacityTarget=t(.6,this.isComet?.8:1),this.fadeSpeed=t(5e-4,.002)+(this.isComet?.001:0),this.fadingIn=!0,this.fadingOut=!1}fadeIn(){this.fadingIn&&(this.opacity+=this.fadeSpeed,this.opacity>=this.opacityTarget&&(this.fadingIn=!1))}fadeOut(){this.fadingOut&&(this.opacity-=this.fadeSpeed/2,this.opacity<=0&&this.reset())}move(){this.x+=this.dx,this.y+=this.dy,!this.fadingOut&&(this.x>l-l/4||this.y<0)&&(this.fadingOut=!0)}draw(){if(o.beginPath(),this.isGiant)o.fillStyle=`rgba(${h.giant},${this.opacity})`,o.arc(this.x,this.y,2,0,2*Math.PI);else if(this.isComet){o.fillStyle=`rgba(${h.comet},${this.opacity})`,o.arc(this.x,this.y,1.5,0,2*Math.PI);for(let e=0;e<30;e++)o.fillStyle=`rgba(${h.comet},${this.opacity-this.opacity/20*e})`,o.fillRect(this.x-this.dx/4*e,this.y-this.dy/4*e-2,2,2)}else o.fillStyle=`rgba(${h.star},${this.opacity})`,o.fillRect(this.x,this.y,this.size,this.size);o.closePath(),o.fill()}}window.addEventListener("resize",i),s()}function setup_sidebar_menu(){if(public_vars.$sidebarMenu.length){var e=public_vars.$sidebarMenu.find("li:has(> ul)"),t=public_vars.$sidebarMenu.hasClass("toggle-others");e.filter(".active").addClass("expanded"),e.each(function(){var e=$(this),i=e.children("a"),n=e.children("ul");e.addClass("has-sub"),i.on("click",function(i){i.preventDefault(),t&&sidebar_menu_close_items_siblings(e),e.hasClass("expanded")||e.hasClass("opened")?sidebar_menu_item_collapse(e,n):sidebar_menu_item_expand(e,n)})})}}function sidebar_menu_item_expand(e,t){if(!(e.data("is-busy")||e.parent(".main-menu").length&&public_vars.$sidebarMenu.hasClass("collapsed"))){e.addClass("expanded").data("is-busy",!0),t.show();var i=t.children(),n=t.outerHeight();i.addClass("is-hidden"),t.height(0),gsap.to(t,{duration:sm_duration,height:n,onComplete:()=>t.height("")}),clearTimeout(e.data("sub_i_1")),clearTimeout(e.data("sub_i_2"));var s=setTimeout(()=>{i.each((e,t)=>$(t).addClass("is-shown"));var t=parseFloat(i.eq(0).css("transition-duration"))||0,n=parseFloat(i.last().css("transition-delay"))||0,s=1e3*(t+n)||sm_transition_delay*i.length,a=setTimeout(()=>{i.removeClass("is-hidden is-shown")},s);e.data("sub_i_2",a),e.data("is-busy",!1)},0);e.data("sub_i_1",s)}}function sidebar_menu_item_collapse(e,t){if(!e.data("is-busy")){var i=t.children();e.removeClass("expanded").data("is-busy",!0),i.addClass("hidden-item"),gsap.to(t,{duration:sm_duration,height:0,onComplete:()=>{e.data("is-busy",!1).removeClass("opened"),t.attr("style","").hide(),i.removeClass("hidden-item"),e.find("li.expanded ul").attr("style","").hide().parent().removeClass("expanded")}})}}function sidebar_menu_close_items_siblings(e){e.siblings(".expanded, .opened").each(function(){var e=$(this),t=e.children("ul");sidebar_menu_item_collapse(e,t)})}function resizable(e){switch(e){case"largescreen":public_vars.$sidebarMenu.removeClass("collapsed");break;case"tabletscreen":public_vars.$sidebarMenu.addClass("collapsed")}}function get_current_breakpoint(){const e=jQuery(window).width(),t=public_vars.breakpoints;for(const i in t){let[n,s]=t[i];if(-1===s&&(s=1/0),e>=n&&e<=s)return i}return null}function is(e){return get_current_breakpoint()===e}function isxs(){return is("devicescreen")||is("sdevicescreen")}function ismdxl(){return is("tabletscreen")||is("largescreen")}function trigger_resizable(){const e=get_current_breakpoint();public_vars.lastBreakpoint!==e&&(public_vars.lastBreakpoint=e,resizable(e))}function times(){clearTimeout(t),dt=new Date;let e=dt.getYear()+1900,i=dt.getMonth()+1,n=dt.getDate(),s=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],a=dt.getDay(),o=dt.getHours(),l=dt.getMinutes(),r=dt.getSeconds();o<10&&(o="0"+o),l<10&&(l="0"+l),r<10&&(r="0"+r),$("#times").html(e+"."+i+"."+n+"&nbsp;<span class='weekday'>"+s[a]+"</span><br><span class='time-text'>"+o+":"+l+":"+r+"</span>"),t=setTimeout(times,1e3)}$(window).scroll(function(){$(this).scrollTop()>=50?($("#topup").fadeIn(200),$(".sidebar-menu").addClass("bgchange")):($("#topup").fadeOut(200),$(".sidebar-menu").removeClass("bgchange"))}),$('a[rel="go-top"]').click(function(){window.scrollTo(0,0)});const body=document.querySelector("body"),element=document.getElementById("pointer"),halfElementWidth=element.offsetWidth/2;body.addEventListener("mousemove",e=>{window.requestAnimationFrame(()=>setPosition(e.clientX,e.clientY))}),/Mobi|Tablet|iPad|iPhone|Android/i.test(navigator.userAgent)&&$("#pointer").css("display","none");const getStorage=e=>localStorage.getItem(e),setStorage=(e,t)=>localStorage.setItem(e,t),setNightMode=e=>{e?(document.body.classList.add("night"),setStorage("night","1"),document.getElementById("suspension_text").innerText="切换日间模式",iziToast.info({timeout:2e3,closeOnEscape:!0,transitionOut:"fadeOutRight",displayMode:"replace",layout:2,transitionIn:"bounceInLeft",position:"topRight",icon:"ti ti-moon-filled",backgroundColor:"#fff",title:"夜间模式切换",message:"已切换为夜间模式"})):(document.body.classList.remove("night"),setStorage("night","0"),document.getElementById("suspension_text").innerText="切换夜间模式",iziToast.info({timeout:2e3,closeOnEscape:!0,transitionOut:"fadeOutRight",displayMode:"replace",layout:2,transitionIn:"bounceInLeft",position:"topRight",icon:"ti ti-sun-filled",backgroundColor:"#fff",title:"日间模式切换",message:"已切换为日间模式"}))},switchNightMode=()=>{const e=getStorage("night")||"0";setNightMode("0"===e)},isNightTime=()=>{const e=(new Date).getHours();return e>18||e<7};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{setNightMode(e.matches)}),(()=>{const e=getStorage("night");setNightMode(null===e?isNightTime():"1"===e)})(),stars(),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("body"),t=window.getComputedStyle(e).backgroundImage.slice(4,-1).replace(/"/g,""),i=new Image;i.src=t,i.onload=function(){console.log("背景图片加载成功")},i.onerror=function(){e.style.background="#3f5d5c",e.style.backgroundImage="none",console.log("背景图片加载失败，已设置为纯色背景")}});var public_vars=public_vars||{};(function(e,t,i){"use strict";e(document).ready(function(){public_vars.$body=e("body"),public_vars.$pageContainer=public_vars.$body.find(".page-container"),public_vars.$sidebarMenu=public_vars.$pageContainer.find(".sidebar-menu"),public_vars.$mainMenu=public_vars.$sidebarMenu.find(".main-menu"),public_vars.$mainContent=public_vars.$pageContainer.find(".main-content"),public_vars.$mainFooter=public_vars.$body.find("footer.main-footer"),public_vars.$userInfoMenu=public_vars.$body.find("nav.navbar.user-info-navbar"),public_vars.wheelPropagation=!0,setup_sidebar_menu(),public_vars.$userInfoMenu.length&&public_vars.$userInfoMenu.find(".user-info-menu > li").css({minHeight:public_vars.$userInfoMenu.outerHeight()-1})})})(jQuery,window);var sm_duration=.2,sm_transition_delay=150;(function(e,t,i){"use strict";e(document).ready(function(){e('a[data-toggle="sidebar"]').on("click",function(e){e.preventDefault(),public_vars.$sidebarMenu.toggleClass("collapsed")}),e('a[data-toggle="mobile-menu"]').on("click",function(e){e.preventDefault(),public_vars.$mainMenu.toggleClass("mobile-is-visible"),public_vars.$sidebarMenu.toggleClass("mobile-is-visible"),public_vars.$pageContainer.toggleClass("mobile-is-visible")}),e('a[data-toggle="user-info-menu"]').on("click",function(e){e.preventDefault(),public_vars.$userInfoMenu.toggleClass("mobile-is-visible")})})})(jQuery,window),$(document).ready(function(){$(document).on("click",".has-sub",function(){var e=$(this);e.hasClass("expanded")?$(".has-sub ul").not(e.find("ul")).removeAttr("style"):e.find("ul").removeAttr("style")}),$(".user-info-menu .d-none").on("click",function(){$(".sidebar-menu").hasClass("collapsed")?$(".has-sub.expanded > ul").removeAttr("style"):$(".has-sub.expanded > ul").show()}),$("#main-menu li ul li").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active")}),$("a.smooth").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),i=$(t).offset().top-30;$("#main-menu li").removeClass("active"),$(this).parent("li").addClass("active"),public_vars.$mainMenu.removeClass("mobile-is-visible"),public_vars.$sidebarMenu.removeClass("mobile-is-visible"),public_vars.$pageContainer.removeClass("mobile-is-visible"),window.scrollTo({top:i,behavior:"smooth"})})});public_vars=public_vars||{};jQuery.extend(public_vars,{breakpoints:{largescreen:[991,-1],tabletscreen:[768,990],devicescreen:[420,767],sdevicescreen:[0,419]},lastBreakpoint:null}),jQuery(window).on("resize orientationchange",trigger_resizable),fetch("https://api.vvhan.com/api/weather").then(e=>e.json()).then(e=>{$("#wea_text").html(e.data.type),$("#city_text").html(e.city),$("#tem_low").html(e.data.low),$("#tem_high").html(e.data.high),$("#win_text").html(e.data.fengxiang),$("#win_speed").html(e.data.fengli)}).catch(console.error);let t=null;t=setTimeout(times,1e3),$(document).ready(function(){var e=performance.now();void 0!==e&&(document.getElementById("time").innerHTML=" 页面加载耗时 "+Math.round(e)+" 毫秒 "),$.get("/cdn-cgi/trace",function(e){sip=e.match(/(ip=?)(\S*)/)[2],str=e.match(/(colo=?)(\S*)/)[2],loc=e.match(/(loc=?)(\S*)/)[2],sts=e.match(/(http==?)(\S*)/)[2],tls=e.match(/(tls==?)(\S*)/)[2],$("#result").append("节点:"+str),$("#result").append("\n访客:"+loc),$("#result").append("\n"+sts),$("#result").append("\n加密:"+tls),$("#result").append("\nIP:"+sip)})}),console.clear();let styleTitle1="\nfont-size: 20px;\nfont-weight: 600;\ncolor: rgb(244,167,89);\n",styleTitle2="\nfont-size: 16px;\ncolor: rgb(244,167,89);\n",styleContent="\ncolor: rgb(30,152,255);\n",title1="WayneのNav",title2="\n==============================\n#   #    #   #   # #   # #####\n#   #   # #   # #  ##  # #\n# # #  #####   #   # # # #####\n## ##  #   #   #   #  ## #\n#   #  #   #   #   #   # #####\n==============================\n",content="\n版 本 号：v6.0.0\n更新日期：2025-07-28\n\nWayneのNav: https://nav.3301.qzz.io/\nGithub:  https://github.com/Waynenet/Wayne-Nav\n";console.log(`%c${title1} %c${title2}\n%c${content}`,styleTitle1,styleTitle2,styleContent);