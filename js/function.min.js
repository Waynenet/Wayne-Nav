function stars(){function e(e){return 1e3*Math.random()<10*e}function t(e,t){return Math.random()*(t-e)+e}function i(){l=window.innerWidth,r=window.innerHeight,a.width=l,a.height=r}function s(){o.clearRect(0,0,l,r);for(let e of d)e.move(),e.fadeIn(),e.fadeOut(),e.draw();requestAnimationFrame(s)}function n(){i(),d=Array.from({length:u},()=>new m),s(),setTimeout(()=>c=!1,50)}const a=document.getElementById("starfield");if(!a)return;const o=a.getContext("2d");let l=window.innerWidth,r=window.innerHeight,d=[],c=!0;const u=Math.floor(.3*l),h={giant:"180,184,240",star:"226,225,142",comet:"225,225,225"};class m{constructor(){this.reset()}reset(){this.isGiant=e(3),this.isComet=!this.isGiant&&!c&&e(20),this.x=t(0,l),this.y=t(0,r),this.size=t(1.1,2.6),this.dx=t(.05,.3)+(this.isComet?t(2.5,6):.05),this.dy=-t(.05,.3)-(this.isComet?t(2.5,6):.05),this.opacity=0,this.opacityTarget=t(.6,this.isComet?.8:1),this.fadeSpeed=t(5e-4,.002)+(this.isComet?.001:0),this.fadingIn=!0,this.fadingOut=!1}fadeIn(){this.fadingIn&&(this.opacity+=this.fadeSpeed,this.opacity>=this.opacityTarget&&(this.fadingIn=!1))}fadeOut(){this.fadingOut&&(this.opacity-=this.fadeSpeed/2,this.opacity<=0&&this.reset())}move(){this.x+=this.dx,this.y+=this.dy,!this.fadingOut&&(this.x>l-l/4||this.y<0)&&(this.fadingOut=!0)}draw(){if(o.beginPath(),this.isGiant)o.fillStyle=`rgba(${h.giant},${this.opacity})`,o.arc(this.x,this.y,2,0,2*Math.PI);else if(this.isComet){o.fillStyle=`rgba(${h.comet},${this.opacity})`,o.arc(this.x,this.y,1.5,0,2*Math.PI);for(let e=0;e<30;e++)o.fillStyle=`rgba(${h.comet},${this.opacity-this.opacity/20*e})`,o.fillRect(this.x-this.dx/4*e,this.y-this.dy/4*e-2,2,2)}else o.fillStyle=`rgba(${h.star},${this.opacity})`,o.fillRect(this.x,this.y,this.size,this.size);o.closePath(),o.fill()}}window.addEventListener("resize",i),n()}function setup_sidebar_menu(){if(!public_vars.$sidebarMenu.length)return;let e=public_vars.$sidebarMenu.find("li:has(> ul)"),t=public_vars.$sidebarMenu.hasClass("toggle-others");e.filter(".active").addClass("expanded"),e.each(function(){let e=$(this),i=e.children("a"),s=e.children("ul");e.addClass("has-sub"),i.on("click",i=>{i.preventDefault(),t&&sidebar_menu_close_items_siblings(e),e.hasClass("expanded")||e.hasClass("opened")?sidebar_menu_item_collapse(e,s):sidebar_menu_item_expand(e,s)})})}function sidebar_menu_item_expand(e,t){if(e.data("is-busy")||e.parent(".main-menu").length&&public_vars.$sidebarMenu.hasClass("collapsed"))return;e.addClass("expanded").data("is-busy",!0),t.show();let i=t.children(),s=t.outerHeight();i.addClass("is-hidden"),t.height(0),gsap.to(t,{duration:sm_d,height:s,onComplete:()=>t.height("")}),clearTimeout(e.data("s1")),clearTimeout(e.data("s2"));let n=setTimeout(()=>{i.each((e,t)=>$(t).addClass("is-shown"));let t=parseFloat(i.eq(0).css("transition-duration"))||0,s=parseFloat(i.last().css("transition-delay"))||0,n=1e3*(t+s)||sm_t_d*i.length,a=setTimeout(()=>i.removeClass("is-hidden is-shown"),n);e.data("s2",a).data("is-busy",!1)},0);e.data("s1",n)}function sidebar_menu_item_collapse(e,t){if(e.data("is-busy"))return;let i=t.children();e.removeClass("expanded").data("is-busy",!0),i.addClass("hidden-item"),gsap.to(t,{duration:sm_d,height:0,onComplete:()=>{e.data("is-busy",!1).removeClass("opened"),t.attr("style","").hide(),i.removeClass("hidden-item"),e.find("li.expanded ul").attr("style","").hide().parent().removeClass("expanded")}})}function sidebar_menu_close_items_siblings(e){e.siblings(".expanded, .opened").each(function(){let e=$(this),t=e.children("ul");sidebar_menu_item_collapse(e,t)})}function resizable(e){switch(e){case"largescreen":public_vars.$sidebarMenu.removeClass("collapsed");break;case"tabletscreen":public_vars.$sidebarMenu.addClass("collapsed")}}function get_current_breakpoint(){let e=$(window).width();for(let t in public_vars.breakpoints){let[i,s]=public_vars.breakpoints[t];if(-1===s&&(s=1/0),e>=i&&e<=s)return t}return null}function trigger_resizable(){let e=get_current_breakpoint();public_vars.lastBreakpoint!==e&&(public_vars.lastBreakpoint=e,resizable(e))}function times(){clearTimeout(t);const e=new Date,i=["日","一","二","三","四","五","六"],s=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),a=e.getSeconds().toString().padStart(2,"0"),o=document.getElementById("times");o&&(o.innerHTML=`${e.getFullYear()}.${e.getMonth()+1}.${e.getDate()} <span class='weekday'>星期${i[e.getDay()]}</span><br/><span class='time-text'>${s}:${n}:${a}</span>`),t=setTimeout(times,1e3)}$(window).scroll(function(){$(this).scrollTop()>=50?($("#topup").fadeIn(200),$(".sidebar-menu").addClass("bgchange")):($("#topup").fadeOut(200),$(".sidebar-menu").removeClass("bgchange"))}),$('a[rel="go-top"]').click(function(){window.scrollTo(0,0)});const body=document.querySelector("body"),pointerElement=document.getElementById("pointer");if(pointerElement){const e=pointerElement.offsetWidth/2;function setPosition(t,i){pointerElement.style.transform=`translate(${t-e+19}px, ${i-e+19}px)`}body.addEventListener("mousemove",e=>{window.requestAnimationFrame(()=>setPosition(e.clientX,e.clientY))})}/Mobi|Tablet|iPad|iPhone|Android/i.test(navigator.userAgent)&&pointerElement&&(pointerElement.style.display="none");const getStorage=e=>localStorage.getItem(e),setStorage=(e,t)=>localStorage.setItem(e,t),setNightMode=e=>{const t=document.getElementById("night-mode-tooltip"),i=e?"已切换为夜间模式":"已切换为日间模式",s=e?"ti ti-moon-filled":"ti ti-sun-filled",n=e?"夜间模式切换":"日间模式切换";e?(document.body.classList.add("night"),setStorage("night","1"),t&&(t.innerText="切换日间模式")):(document.body.classList.remove("night"),setStorage("night","0"),t&&(t.innerText="切换夜间模式")),iziToast.info({timeout:2e3,closeOnEscape:!0,transitionOut:"fadeOutRight",displayMode:"replace",layout:2,transitionIn:"bounceInLeft",position:"topRight",icon:s,backgroundColor:"#fff",title:n,message:i})},switchNightMode=()=>setNightMode("0"===getStorage("night")),isNightTime=()=>{const e=(new Date).getHours();return e>18||e<7};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>setNightMode(e.matches)),(()=>{const e=getStorage("night");setNightMode(null===e?isNightTime():"1"===e)})(),stars(),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("body"),t=window.getComputedStyle(e).backgroundImage.match(/url\("?(.+?)"?\)/);if(!t)return;const i=t[1],s=new Image;s.src=i,s.onerror=(()=>{e.style.background="#3f5d5c",e.style.backgroundImage="none",console.warn("背景图片加载失败，已设置为纯色背景")})});var public_vars=public_vars||{};(function(e,t,i){"use strict";e(document).ready(()=>{e.extend(public_vars,{$body:e("body"),$pageContainer:e(".page-container"),$sidebarMenu:e(".sidebar-menu"),$mainMenu:e(".main-menu"),$mainContent:e(".main-content"),$userInfoMenu:e("nav.user-info-navbar")}),setup_sidebar_menu(),public_vars.$userInfoMenu.length&&public_vars.$userInfoMenu.find(".user-info-menu > li").css({minHeight:public_vars.$userInfoMenu.outerHeight()-1})})})(jQuery,window);var sm_d=.2,sm_t_d=150;(function(e,t,i){"use strict";e(()=>{e('a[data-toggle="sidebar"]').on("click",e=>{e.preventDefault(),public_vars.$sidebarMenu.toggleClass("collapsed")}),e('a[data-toggle="mobile-menu"]').on("click",e=>{e.preventDefault(),public_vars.$mainMenu.toggleClass("mobile-is-visible"),public_vars.$sidebarMenu.toggleClass("mobile-is-visible"),public_vars.$pageContainer.toggleClass("mobile-is-visible")}),e('a[data-toggle="user-info-menu"]').on("click",e=>{e.preventDefault(),public_vars.$userInfoMenu.toggleClass("mobile-is-visible")})})})(jQuery,window),$(()=>{$(document).on("click",".has-sub",function(){let e=$(this);e.hasClass("expanded")?$(".has-sub ul").not(e.find("ul")).removeAttr("style"):e.find("ul").removeAttr("style")}),$(".user-info-menu .d-none").on("click",()=>{$(".sidebar-menu").hasClass("collapsed")?$(".has-sub.expanded > ul").removeAttr("style"):$(".has-sub.expanded > ul").show()}),$("#main-menu li ul li").on("click",function(){$(this).siblings().removeClass("active").end().addClass("active")}),$("a.smooth").on("click",function(e){e.preventDefault();let t=$(this).attr("href"),i=$(t).offset().top-30;$("#main-menu li").removeClass("active"),$(this).parent("li").addClass("active"),public_vars.$mainMenu.removeClass("mobile-is-visible"),public_vars.$sidebarMenu.removeClass("mobile-is-visible"),public_vars.$pageContainer.removeClass("mobile-is-visible"),window.scrollTo({top:i,behavior:"smooth"})})}),$.extend(public_vars,{breakpoints:{largescreen:[991,-1],tabletscreen:[768,990],devicescreen:[420,767],sdevicescreen:[0,419]},lastBreakpoint:null}),$(window).on("resize orientationchange",trigger_resizable),fetch("https://api.vvhan.com/api/weather").then(e=>e.json()).then(e=>{$("#wea_text").html(e.data.type),$("#city_text").html(e.city),$("#tem_low").html(e.data.low),$("#tem_high").html(e.data.high),$("#win_text").html(e.data.fengxiang),$("#win_speed").html(e.data.fengli)}).catch(console.error);let t=null;times(),$(()=>{let e=performance.now();e&&$("#time").html(" 页面加载耗时 "+Math.round(e)+" 毫秒 "),$.get("/cdn-cgi/trace",e=>{let t=Object.fromEntries(e.trim().split("\n").map(e=>e.split("=")));$("#result").html(`节点:${t.colo} | 访客:${t.loc} | IP:${t.ip}`)})}),console.clear(),console.log("%cWayneのNav %c\n==============================\n#   #    #   #   # #   # #####\n#   #   # #   # #  ##  # #\n# # #  #####   #   # # # #####\n## ##  #   #   #   #  ## #\n#   #  #   #   #   #   # #####\n==============================\n %c\n版 本 号：v6.1.0\n更新日期：2025-07-29\n\nWayneのNav: https://nav.3301.qzz.io/\nGithub:  https://github.com/Waynenet/Wayne-Nav\n","font-size: 20px; font-weight: 600; color: rgb(244,167,89);","font-size: 16px; color: rgb(244,167,89);","color: rgb(30,152,255);"),document.addEventListener("DOMContentLoaded",function(){const e=document.documentElement,t=document.getElementById("settings-container"),i=["alpha-slider","overlay-slider"];if(!t)return void console.warn("外观设置控件容器未找到，功能禁用。");const s={"overlay-slider":{variable:"--overlay-opacity",defaults:{light:.4,night:0},unit:""},"blur-slider":{variable:"--module-blur-value",defaults:{light:12,night:0},unit:"px"},"alpha-slider":{variable:"--module-bg-alpha",defaults:{light:.1,night:.15},unit:""}},n=()=>document.body.classList.contains("night")?"night":"light",a=()=>{const t=n();Object.values(s).forEach(s=>{const n=document.querySelector(`.control-slider[data-variable="${s.variable}"]`);if(!n)return;const a=`${s.variable}-${t}`,o=localStorage.getItem(a),l=s.defaults[t],r=null!==o?o:l;if(e.style.setProperty(s.variable,r+s.unit),n.value=r,n.nextElementSibling){const e=i.includes(n.id)?2:0;n.nextElementSibling.textContent=parseFloat(r).toFixed(e)}})};t.addEventListener("click",function(e){const t=e.target.closest(".suspension_box");if(t){if(e.stopPropagation(),"settings-toggle"===t.id)return this.classList.toggle("open"),void(this.classList.contains("open")||(this.querySelectorAll(".control-slider-panel.visible").forEach(e=>e.classList.remove("visible")),this.classList.remove("hide-tooltips")));if(t.classList.contains("suspension_control")){const e=document.getElementById(`${t.dataset.control}-panel`);if(!e)return;const i=e.classList.contains("visible");this.querySelectorAll(".control-slider-panel").forEach(e=>e.classList.remove("visible")),i||e.classList.add("visible");const s=null!==this.querySelector(".control-slider-panel.visible");this.classList.toggle("hide-tooltips",s)}}}),document.querySelectorAll(".control-slider").forEach(t=>{t.addEventListener("input",function(){const t=this.dataset.variable,s=this.dataset.unit,a=this.value;if(e.style.setProperty(t,a+s),this.nextElementSibling){const e=i.includes(this.id)?2:0;this.nextElementSibling.textContent=parseFloat(a).toFixed(e)}const o=`${t}-${n()}`;localStorage.setItem(o,a)}),t.closest(".control-slider-panel").addEventListener("click",e=>e.stopPropagation())}),document.addEventListener("click",function(){t.classList.contains("open")&&(t.classList.remove("open","hide-tooltips"),t.querySelectorAll(".control-slider-panel.visible").forEach(e=>e.classList.remove("visible")))}),new MutationObserver(()=>{a()}).observe(document.body,{attributes:!0,attributeFilter:["class"]}),a()});