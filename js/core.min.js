function renderContent(){function e(e){const t=document.getElementById("main-menu");if(!t)return;const n=e.map(e=>{if(e.children&&e.children.length>0){const t=e.children.map(e=>`<li><a href="${e.href}" class="smooth"><span class="title">${e.title}</span></a></li>`).join("");return`\n                    <li>\n                        <a><i class="${e.icon}"></i> <span class="title">${e.title}</span></a>\n                        <ul>${t}</ul>\n                    </li>\n                `}return`\n                    <li>\n                        <a href="${e.href}" class="smooth"><i class="${e.icon}"></i> <span class="title">${e.title}</span></a>\n                    </li>\n                `}).join("");t.innerHTML=n}function t(e){const t=document.getElementById("search-container");if(!e||!t)return;const{categoriesHTML:n,providersHTML:s}=e.reduce((e,t,n)=>{const s=0===n?"active":"";e.categoriesHTML+=`\n                    <div class="category-tab ${s}" data-category="${t.groupName}">${t.groupName}</div>`;const i=t.items.map(e=>`<div class="provider-item" data-id="${e.id}">${e.name}</div>`).join("");return e.providersHTML+=`\n                    <div class="provider-list ${s}" data-category-content="${t.groupName}">${i}</div>`,e},{categoriesHTML:"",providersHTML:""}),i=`\n            <div class="search-bar" id="search-bar">\n                <div class="selected-engine" id="selected-engine"></div>\n                <input type="text" id="search-text" autocomplete="off">\n                <button type="submit"><i class="ti ti-search"></i></button>\n            </div>\n            <div class="search-options-panel" id="search-options-panel">\n                <div class="search-categories">${n}</div>\n                <div class="search-providers">${s}</div>\n            </div>\n        `;t.innerHTML=i}function n(e){const t=document.getElementById("dynamic-content-container");if(!e||!t)return;const n=e.map(e=>{const t=e.items.map(e=>{let t="images/browser.svg";try{const n=new URL(e.url).hostname;t=`https://api.xinac.net/icon/?url=${n}`}catch(t){console.warn(`无效的URL，无法生成图标: ${e.url}`)}return`\n                    <div class="col-6 col-sm-6 col-md-4 col-lg-3 col-xl-2w col-xxl-2">\n                        <div class="w-widget box2" onclick="window.open('${e.url}', '_blank')" data-bs-toggle="tooltip" data-bs-placement="bottom" title="${e.url}">\n                            <div class="w-comment-entry">\n                                <a><img data-src="${t}" class="lozad img-circle" onerror="this.onerror=null;this.src='images/browser.svg';"></a>\n                                <div class="w-comment">\n                                    <a class="overflowClip_1"><strong>${e.title}</strong></a>\n                                    <p class="overflowClip_2">${e.description}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `}).join("");return`<h6 class="tag"><i class="ti ti-tag" id="${e.categoryName}"></i>${e.categoryName}</h6><div class="row">${t}</div><br />`}).join("");t.innerHTML=n}function s(e){const t={form:document.getElementById("super-search-fm"),container:document.getElementById("search-container"),bar:document.getElementById("search-bar"),input:document.getElementById("search-text"),engineDisplay:document.getElementById("selected-engine"),panel:document.getElementById("search-options-panel"),categoryTabsContainer:document.querySelector(".search-categories"),providerListsContainer:document.querySelector(".search-providers")};if(Object.values(t).some(e=>!e))return void console.error("关键搜索元素未在DOM中找到，无法绑定事件。");const n=new Map;e.forEach(e=>{e.items.forEach(e=>n.set(e.id,e))});const s=e=>{const i=n.get(e);if(i)t.input.placeholder=i.placeholder,t.form.action=i.url,t.engineDisplay.innerHTML=`<div class="icon-wrapper">${i.name}</div>`,t.panel.querySelectorAll(".provider-item").forEach(t=>{t.classList.toggle("selected",t.dataset.id===e)}),localStorage.setItem("searchEngineId",e);else{const e=n.values().next().value;e&&s(e.id)}};t.engineDisplay.addEventListener("click",e=>{t.panel.classList.toggle("active"),t.bar.classList.toggle("focused"),e.stopPropagation()}),document.addEventListener("click",e=>{t.container.contains(e.target)||(t.panel.classList.remove("active"),t.bar.classList.remove("focused"))}),t.panel.addEventListener("click",e=>{const n=e.target.closest(".category-tab");if(n){const e=n.dataset.category;t.categoryTabsContainer.querySelectorAll(".category-tab").forEach(e=>e.classList.remove("active")),n.classList.add("active"),t.providerListsContainer.querySelectorAll(".provider-list").forEach(t=>{t.classList.toggle("active",t.dataset.categoryContent===e)})}const i=e.target.closest(".provider-item");i&&(s(i.dataset.id),t.input.focus(),t.panel.classList.remove("active"),t.bar.classList.remove("focused"))}),t.form.addEventListener("submit",e=>{e.preventDefault();const n=t.input.value.trim();if(n){const e=`${t.form.action}${encodeURIComponent(n)}`;window.open(e,"_blank")}});const i=localStorage.getItem("searchEngineId");if(i&&n.has(i)){s(i);n.get(i);const t=e.find(e=>e.items.some(e=>e.id===i));if(t){const e=document.querySelector(`.category-tab[data-category="${t.groupName}"]`);e&&e.click()}}else{const e=n.values().next().value;if(e){s(e.id);const t=document.querySelector(".category-tab");t&&t.click()}}}function i(){if("function"==typeof lozad){const e=lozad();e.observe()}if("undefined"!=typeof bootstrap){const e=Array.from(document.querySelectorAll('[data-bs-toggle="tooltip"]'));e.forEach(e=>{new bootstrap.Tooltip(e)})}}fetch("js/data.json").then(e=>{if(!e.ok)throw new Error(`HTTP 错误！状态: ${e.status}. 无法加载 'js/data.json'`);return e.json()}).then(o=>{if(!o||!o.searchConfig||!o.categories)throw new Error("JSON 数据格式不正确或缺少必要的配置部分。");e(o.menuConfig),t(o.searchConfig),n(o.categories),s(o.searchConfig),i(),setupSidebarMenu(),setupSidebarToggles()}).catch(e=>{console.error("严重错误:",e);const t=document.getElementById("dynamic-content-container");t&&(t.innerHTML='<p style="text-align: center; color: red;">加载内容失败！请按F12查看控制台中的详细错误信息。</p>')})}function initializePageFunctions(){Object.assign(public_vars,{$body:document.body,$pageContainer:document.querySelector(".page-container"),$sidebarMenu:document.querySelector(".sidebar-menu"),$mainMenu:document.querySelector(".main-menu"),$mainContent:document.querySelector(".main-content"),$userInfoMenu:document.querySelector("nav.user-info-navbar")}),setupBackToTop(),setupMousePointer(),setupDarkMode(),setupStarfield(),setupBgImageFallback(),setupAppearanceSettings(),setupFooterInfo()}function setupBackToTop(){const e=document.getElementById("topup"),t=document.querySelector(".sidebar-menu-inner");if(e){window.addEventListener("scroll",function(){window.scrollY>=50?(e.style.display="block",e.style.opacity="1",t&&t.classList.remove("bgchange")):(e.style.opacity="0",e.addEventListener("transitionend",()=>{window.scrollY<50&&(e.style.display="none")},{once:!0}),t&&t.classList.add("bgchange"))});const n=document.querySelector('a[rel="go-top"]');n&&n.addEventListener("click",function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})}}function setupMousePointer(){const e=document.body,t=document.getElementById("pointer");if(t){const s=t.offsetWidth/2;function n(e,n){t.style.transform=`translate(${e-s+19}px, ${n-s+19}px)`}e.addEventListener("mousemove",e=>{window.requestAnimationFrame(()=>n(e.clientX,e.clientY))})}/Mobi|Tablet|iPad|iPhone|Android/i.test(navigator.userAgent)&&t&&(t.style.display="none")}function setupDarkMode(){const e=e=>localStorage.getItem(e),t=(e,t)=>localStorage.setItem(e,t),n=e=>{const n=document.getElementById("night-mode-tooltip"),s=e?"已切换为夜间模式":"已切换为日间模式",i=e?"ti ti-moon-filled":"ti ti-sun-filled",o=e?"夜间模式切换":"日间模式切换";e?(document.body.classList.add("night"),t("night","1"),n&&(n.innerText="切换日间模式")):(document.body.classList.remove("night"),t("night","0"),n&&(n.innerText="切换夜间模式")),"undefined"!=typeof iziToast&&iziToast.info({timeout:2e3,closeOnEscape:!0,transitionOut:"fadeOutRight",displayMode:"replace",layout:2,transitionIn:"bounceInLeft",position:"topRight",icon:i,backgroundColor:"#fff",title:o,message:s})},s=()=>{const t="0"===e("night");n(t)},i=document.getElementById("dark-mode-switch");i&&i.addEventListener("click",e=>{e.preventDefault(),s()});const o=()=>{const e=(new Date).getHours();return e>18||e<7};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>n(e.matches));const a=e("night");n(null===a?o():"1"===a)}function setupStarfield(){function e(){function e(e){return 1e3*Math.random()<10*e}function t(e,t){return Math.random()*(t-e)+e}function n(){c=window.innerWidth,r=window.innerHeight,o.width=c,o.height=r}function s(){a.clearRect(0,0,c,r);for(let e of l)e.move(),e.fadeIn(),e.fadeOut(),e.draw();requestAnimationFrame(s)}function i(){n(),l=Array.from({length:u},()=>new h),s(),setTimeout(()=>d=!1,50)}const o=document.getElementById("starfield");if(!o)return;const a=o.getContext("2d");let c=window.innerWidth,r=window.innerHeight,l=[],d=!0;const u=Math.floor(.3*c),m={giant:"180,184,240",star:"226,225,142",comet:"225,225,225"};class h{constructor(){this.reset()}reset(){this.isGiant=e(3),this.isComet=!this.isGiant&&!d&&e(20),this.x=t(0,c),this.y=t(0,r),this.size=t(1.1,2.6),this.dx=t(.05,.3)+(this.isComet?t(2.5,6):.05),this.dy=-t(.05,.3)-(this.isComet?t(2.5,6):.05),this.opacity=0,this.opacityTarget=t(.6,this.isComet?.8:1),this.fadeSpeed=t(5e-4,.002)+(this.isComet?.001:0),this.fadingIn=!0,this.fadingOut=!1}fadeIn(){this.fadingIn&&(this.opacity+=this.fadeSpeed,this.opacity>=this.opacityTarget&&(this.fadingIn=!1))}fadeOut(){this.fadingOut&&(this.opacity-=this.fadeSpeed/2,this.opacity<=0&&this.reset())}move(){this.x+=this.dx,this.y+=this.dy,!this.fadingOut&&(this.x>c-c/4||this.y<0)&&(this.fadingOut=!0)}draw(){if(a.beginPath(),this.isGiant)a.fillStyle=`rgba(${m.giant},${this.opacity})`,a.arc(this.x,this.y,2,0,2*Math.PI);else if(this.isComet){a.fillStyle=`rgba(${m.comet},${this.opacity})`,a.arc(this.x,this.y,1.5,0,2*Math.PI);for(let e=0;e<30;e++)a.fillStyle=`rgba(${m.comet},${this.opacity-this.opacity/20*e})`,a.fillRect(this.x-this.dx/4*e,this.y-this.dy/4*e-2,2,2)}else a.fillStyle=`rgba(${m.star},${this.opacity})`,a.fillRect(this.x,this.y,this.size,this.size);a.closePath(),a.fill()}}window.addEventListener("resize",n),i()}e()}function setupBgImageFallback(){const e=document.body,t=window.getComputedStyle(e).backgroundImage.match(/url\("?(.+?)"?\)/);if(!t)return;const n=t[1],s=new Image;s.src=n,s.onerror=(()=>{e.style.background="#3f5d5c",e.style.backgroundImage="none",console.warn("背景图片加载失败，已设置为纯色背景")})}function setupSidebarMenu(){function e(e,t){if("true"===e.dataset.isBusy||e.parentElement.classList.contains("main-menu")&&n.classList.contains("collapsed"))return;e.classList.add("expanded"),e.dataset.isBusy="true",t.style.display="block";const o=Array.from(t.children),a=t.scrollHeight;o.forEach(e=>e.classList.add("is-hidden")),t.style.height="0px",gsap.to(t,{duration:s,height:a,onComplete:()=>{t.style.height=""}}),clearTimeout(e.dataset.s1),clearTimeout(e.dataset.s2);const c=setTimeout(()=>{o.forEach(e=>e.classList.add("is-shown"));const t=o[0],n=o[o.length-1],s=t&&parseFloat(window.getComputedStyle(t).transitionDuration)||0,a=n&&parseFloat(window.getComputedStyle(n).transitionDelay)||0,c=1e3*(s+a)||i*o.length,r=setTimeout(()=>{o.forEach(e=>e.classList.remove("is-hidden","is-shown")),e.dataset.isBusy="false"},c);e.dataset.s2=r},0);e.dataset.s1=c}function t(e,t){if("true"===e.dataset.isBusy)return;const n=Array.from(t.children);e.classList.remove("expanded"),e.dataset.isBusy="true",n.forEach(e=>e.classList.add("hidden-item")),gsap.to(t,{duration:s,height:0,onComplete:()=>{e.dataset.isBusy="false",e.classList.remove("opened"),t.removeAttribute("style"),t.style.display="none",n.forEach(e=>e.classList.remove("hidden-item")),e.querySelectorAll("li.expanded").forEach(e=>{const t=e.querySelector(":scope > ul");t&&(t.removeAttribute("style"),t.style.display="none",e.classList.remove("expanded"))})}})}const{$sidebarMenu:n}=public_vars;if(!n)return;const s=.2,i=150,o=n.classList.contains("toggle-others"),a=Array.from(n.querySelectorAll("li")).filter(e=>e.querySelector(":scope > ul"));a.forEach(n=>{n.classList.add("has-sub"),n.classList.contains("active")&&n.classList.add("expanded");const s=n.querySelector(":scope > a"),i=n.querySelector(":scope > ul");s&&i&&s.addEventListener("click",s=>{if(s.preventDefault(),o){const e=Array.from(n.parentElement.children).filter(e=>e!==n&&e.classList.contains("has-sub"));e.forEach(e=>{if(e.classList.contains("expanded")||e.classList.contains("opened")){const n=e.querySelector(":scope > ul");n&&t(e,n)}})}n.classList.contains("expanded")||n.classList.contains("opened")?t(n,i):e(n,i)})})}function setupSidebarToggles(){function e(e){if(s)switch(e){case"largescreen":s.classList.remove("collapsed");break;case"tabletscreen":s.classList.add("collapsed")}}function t(){const e=window.innerWidth;for(const t in public_vars.breakpoints){let[n,s]=public_vars.breakpoints[t];if(-1===s&&(s=1/0),e>=n&&e<=s)return t}return null}function n(){const n=t();public_vars.lastBreakpoint!==n&&(public_vars.lastBreakpoint=n,e(n))}const{$sidebarMenu:s,$mainMenu:i,$pageContainer:o,$userInfoMenu:a}=public_vars;if(document.querySelectorAll('a[data-toggle="sidebar"]').forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),s&&s.classList.toggle("collapsed")})}),document.querySelectorAll('a[data-toggle="mobile-menu"]').forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),i&&i.classList.toggle("mobile-is-visible"),s&&s.classList.toggle("mobile-is-visible"),o&&o.classList.toggle("mobile-is-visible")})}),document.querySelectorAll('a[data-toggle="user-info-menu"]').forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),a&&a.classList.toggle("mobile-is-visible")})}),a){const e=a.offsetHeight-1;a.querySelectorAll(".user-info-menu > li").forEach(t=>{t.style.minHeight=`${e}px`})}document.addEventListener("click",function(e){if(e.target.closest(".has-sub")){const t=e.target.closest(".has-sub");if(!t.classList.contains("expanded")){const e=t.querySelector("ul");e&&e.removeAttribute("style")}}}),document.querySelectorAll(".user-info-menu .d-none").forEach(e=>{e.addEventListener("click",()=>{s&&s.classList.contains("collapsed")?document.querySelectorAll(".has-sub.expanded > ul").forEach(e=>e.removeAttribute("style")):document.querySelectorAll(".has-sub.expanded > ul").forEach(e=>e.style.display="block")})}),document.querySelectorAll("#main-menu li ul li").forEach(e=>{e.addEventListener("click",function(){Array.from(this.parentElement.children).forEach(e=>e.classList.remove("active")),this.classList.add("active")})}),document.querySelectorAll("a.smooth").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),n=document.querySelector(t);if(!n)return;const a=n.offsetTop-30;document.querySelectorAll("#main-menu li").forEach(e=>e.classList.remove("active")),this.parentElement.classList.add("active"),i&&i.classList.remove("mobile-is-visible"),s&&s.classList.remove("mobile-is-visible"),o&&o.classList.remove("mobile-is-visible"),window.scrollTo({top:a,behavior:"smooth"})})}),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),n()}function setupAppearanceSettings(){const e=document.documentElement,t=document.getElementById("settings-container"),n=["alpha-slider","overlay-slider"];if(!t)return void console.warn("外观设置控件容器未找到，功能禁用。");const s={"overlay-slider":{variable:"--overlay-opacity",defaults:{light:.4,night:0},unit:""},"blur-slider":{variable:"--module-blur-value",defaults:{light:12,night:0},unit:"px"},"alpha-slider":{variable:"--module-bg-alpha",defaults:{light:.1,night:.15},unit:""}},i=()=>document.body.classList.contains("night")?"night":"light",o=()=>{const t=i();Object.values(s).forEach(s=>{const i=document.querySelector(`.control-slider[data-variable="${s.variable}"]`);if(!i)return;const o=`${s.variable}-${t}`,a=localStorage.getItem(o),c=s.defaults[t],r=null!==a?a:c;if(e.style.setProperty(s.variable,r+s.unit),i.value=r,i.nextElementSibling){const e=n.includes(i.id)?2:0;i.nextElementSibling.textContent=parseFloat(r).toFixed(e)}})};t.addEventListener("click",function(e){const t=e.target.closest(".suspension_box");if(t){if(e.stopPropagation(),"settings-toggle"===t.id)return this.classList.toggle("open"),void(this.classList.contains("open")||(this.querySelectorAll(".control-slider-panel.visible").forEach(e=>e.classList.remove("visible")),this.classList.remove("hide-tooltips")));if(t.classList.contains("suspension_control")){const e=document.getElementById(`${t.dataset.control}-panel`);if(!e)return;const n=e.classList.contains("visible");this.querySelectorAll(".control-slider-panel").forEach(e=>e.classList.remove("visible")),n||e.classList.add("visible");const s=null!==this.querySelector(".control-slider-panel.visible");this.classList.toggle("hide-tooltips",s)}}}),document.querySelectorAll(".control-slider").forEach(t=>{t.addEventListener("input",function(){const t=this.dataset.variable,s=this.dataset.unit,o=this.value;if(e.style.setProperty(t,o+s),this.nextElementSibling){const e=n.includes(this.id)?2:0;this.nextElementSibling.textContent=parseFloat(o).toFixed(e)}const a=`${t}-${i()}`;localStorage.setItem(a,o)}),t.closest(".control-slider-panel").addEventListener("click",e=>e.stopPropagation())}),document.addEventListener("click",function(){t.classList.contains("open")&&(t.classList.remove("open","hide-tooltips"),t.querySelectorAll(".control-slider-panel.visible").forEach(e=>e.classList.remove("visible")))}),new MutationObserver(()=>{o()}).observe(document.body,{attributes:!0,attributeFilter:["class"]}),o()}function setupFooterInfo(){function e(){clearTimeout(t);const n=new Date,s=["日","一","二","三","四","五","六"],i=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),a=n.getSeconds().toString().padStart(2,"0"),c=document.getElementById("times");c&&(c.innerHTML=`${n.getFullYear()}.${n.getMonth()+1}.${n.getDate()} <span class='weekday'>星期${s[n.getDay()]}</span><br/><span class='time-text'>${i}:${o}:${a}</span>`),t=setTimeout(e,1e3)}fetch("https://api.vvhan.com/api/weather").then(e=>e.json()).then(e=>{const t=document.getElementById("wea_text"),n=document.getElementById("city_text"),s=document.getElementById("tem_low"),i=document.getElementById("tem_high"),o=document.getElementById("win_text"),a=document.getElementById("win_speed");t&&(t.innerHTML=e.data.type),n&&(n.innerHTML=e.city),s&&(s.innerHTML=e.data.low),i&&(i.innerHTML=e.data.high),o&&(o.innerHTML=e.data.fengxiang),a&&(a.innerHTML=e.data.fengli)}).catch(console.error);let t=null;e();const n=document.getElementById("time");n&&performance.now()&&(n.innerHTML=` 页面加载耗时 ${Math.round(performance.now())} 毫秒 `),fetch("/cdn-cgi/trace").then(e=>e.text()).then(e=>{const t=Object.fromEntries(e.trim().split("\n").map(e=>e.split("="))),n=document.getElementById("result");n&&(n.innerHTML=`节点:${t.colo} | 访客:${t.loc} | IP:${t.ip}`)}),console.clear(),console.log("%cWayneのNav %c\n==============================\n#   #    #   #   # #   # #####\n#   #   # #   # #  ##  # #\n# # #  #####   #   # # # #####\n## ##  #   #   #   #  ## #\n#   #  #   #   #   #   # #####\n==============================\n %c\n版 本 号：v7.0.0\n更新日期：2025-08-11\n\nWayneのNav: https://nav.3301.qzz.io/\nGithub:  https://github.com/Waynenet/Wayne-Nav\n","font-size: 20px; font-weight: 600; color: rgb(244,167,89);","font-size: 16px; color: rgb(244,167,89);","color: rgb(30,152,255);")}const public_vars={$body:null,$pageContainer:null,$sidebarMenu:null,$mainMenu:null,$mainContent:null,$userInfoMenu:null,breakpoints:{largescreen:[991,-1],tabletscreen:[768,990],devicescreen:[420,767],sdevicescreen:[0,419]},lastBreakpoint:null};document.addEventListener("DOMContentLoaded",function(){renderContent(),initializePageFunctions()});